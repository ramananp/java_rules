<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "sql-map-2.dtd">

<sqlMap namespace="AATACommentsAttachment"> 


<!-- ********** START COMMENT ATTACHMENT **--> 
	<parameterMap id="saveCommentAttachmentParam" class="com.jpmchase.aata.services.to.AATAAssetTransferWrapperTO">
	  <parameter property="commentAttachement.ticketId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.appCtx" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.comment" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.empId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.empName" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.appRefId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.actvFlag" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.visibilityId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	  <parameter property="commentAttachement.viewAll" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
	  <parameter property="errorCode" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT" /> 
	  <parameter property="errorMessage" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT" /> 
	  <parameter property="loginUid" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
  	</parameterMap>
  	<procedure id="saveCommentAttachment" parameterMap="saveCommentAttachmentParam" resultClass="java.lang.String">{call AATA..sp_at_SaveComments(?,?,?,?,?,?,?,?,?,?,?,?)}</procedure> 
  	
  	
	<parameterMap id="getCommentAttachmentHistParam" class="com.jpmchase.aata.services.to.AATAAssetTransferWrapperTO">
		<parameter property="commentAttachement.ticketId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
  		<parameter property="commentAttachement.appCtx" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
  		<parameter property="commentAttachement.appRefId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	    <parameter property="commentAttachement.visibilityId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" /> 
	   	<parameter property="errorCode" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT" /> 
  		<parameter property="errorMessage" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT" /> 
  	</parameterMap>
	<resultMap id="getCommentAttachmentHistResult" class="com.jpmchase.aata.services.to.CommentsAttachmentHistoryInfo">
	  <result property="appCtxDesc" column="APPL_CNTXT_DESC" jdbcType="VARCHAR" javaType="java.lang.String"/>
	  <result property="appCtxRefId" column="APPL_CNTXT_REF_ID" jdbcType="VARCHAR" javaType="java.lang.String"/> 
	  <result property="ticketId" column="TCKT_ID" jdbcType="VARCHAR" javaType="java.lang.String"/>
	  <result property="creationDate" column="CRE_TS" jdbcType="VARCHAR" javaType="java.lang.String"/>
	  <result property="commentedById" column="EMP_STD_ID" jdbcType="VARCHAR" javaType="java.lang.String"/> 
	  <result property="commentStatus" column="CMNT_STS" jdbcType="VARCHAR" javaType="java.lang.String"/> 
	  <result property="commentBy" column="SRV_RSRC_NM" jdbcType="VARCHAR" javaType="java.lang.String"/> 
	  <result property="commentDate" column="CMNT_TS" jdbcType="VARCHAR" javaType="java.lang.String"/> 
	  <result property="commentDesc" column="CMNT_TX_TOTAL" jdbcType="VARCHAR" javaType="java.lang.String"/> 
	  <result property="commentsTotal" column="CMNT_TX" jdbcType="VARCHAR" javaType="java.lang.String"/> 
	  <result property="commentID" column="CMNT_ID" jdbcType="VARCHAR" javaType="java.lang.String"/>
	  <result property="commentTsDate" column="CMNT_TS_DATE" jdbcType="DATETIME" javaType="java.sql.Timestamp"/>
  	</resultMap>
  	<procedure id="getCommentAttachmentHist" parameterMap="getCommentAttachmentHistParam" resultMap="getCommentAttachmentHistResult">{call AATA..sp_at_GetComments(?,?,?,?,?,?)}</procedure> 
  	
	<!-- ********** END COMMENT ATTACHMENT **-->
	
	<!-- ********** START DELETE COMMENT **-->
	
	<parameterMap id="deleteCommentParam" class="com.jpmchase.aata.services.to.AATAAssetTransferWrapperTO">
		<parameter property="commentAttachement.ticketId" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
		<parameter property="commentAttachement.commentIdInt" jdbcType="NUMERIC" javaType="java.lang.Integer" nullValue="-1" mode="IN" />
  		<parameter property="loginUid" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
	   	<parameter property="errorCode" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT" /> 
  		<parameter property="errorMessage" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT" />
  	</parameterMap>
  	
  	<procedure id="deleteComments" parameterMap="deleteCommentParam">{call AATA..sp_at_delComments(?,?,?,?,?)}</procedure>
  	
  	<!-- ********** START DELETE COMMENT **-->
	
</sqlMap>
